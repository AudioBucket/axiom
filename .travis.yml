os: osx
osx_image: xcode9.3
language: cpp

cache:
  directories:
    - $HOME/Library/Caches/Homebrew

# dependencies required:
#  - GCC 7
#  - VST 2 SDK
#  - Qt 5.10
#  - LLVM 6
#  - PortAudio
install:
 - brew cask uninstall oclint
 - brew install gcc@7 && C=gcc-7 && CXX=g++-7
 - $CC --version
 - $CXX --version
 - mkdir build
 - cd build
 - curl https://download.steinberg.net/sdk_downloads/vstsdk369_01_03_2018_build_132.zip > vstsdk.zip
 - unzip vstsdk.zip VST_SDK/VST2_SDK/**/*
 - brew install qt
 - brew install llvm
 - brew install portaudio

before_script:
  - cmake ../ -DAXIOM_STATIC_LINK=ON -DVST2_SDK_ROOT="$TRAVIS_BUILD_DIR/build/VST_SDK/VST2_SDK" -DCMAKE_PREFIX_PATH="/usr/local/opt/qt;/usr/local/opt/llvm"

script:
  - cmake --build ./
